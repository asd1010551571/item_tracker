<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Item Tracker</title>

<style>
:root {
    --bg: #09090b;
    --card: #18181b;
}
* { box-sizing: border-box; }

body {
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    background: var(--bg);
    color: #f4f4f5;
    margin: 0;
}

.container {
    max-width: 640px;
    margin: 0 auto;
    padding: 10px 8px;
}

/* HEADER */
.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 4px 14px;
    position: sticky;
    top: 0;
    background: var(--bg);
}

.header h1 {
    font-size: 24px;
    margin: 0;
}

/* ADD BAR */
.add-bar {
    background: #27272a;
    border-radius: 9999px;
    padding: 4px;
    display: flex;
    margin-bottom: 14px;
}

#item-input {
    background: transparent;
    border: none;
    padding: 10px 14px;
    color: white;
    font-size: 16px;
    flex: 1;
    outline: none;
}

.add-btn {
    background: white;
    color: black;
    font-weight: 700;
    padding: 0 18px;
    border-radius: 9999px;
    font-size: 14px;
    border: none;
}

/* CARD */
.card {
    background: var(--card);
    border-radius: 14px;
    overflow: hidden;
    margin-bottom: 8px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.35);
}

/* ITEM HEADER */
.item-header {
    padding: 8px 12px;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 15px;
    font-weight: 600;
    background: #111113;
}

.item-name {
    flex: 1;
    cursor: pointer;
}

.item-header button {
    background: none;
    border: none;
    color: #a1a1aa;
    font-size: 14px;
    cursor: pointer;
}

/* SECTION */
.section {
    display: grid;
    grid-template-columns: 1fr 1fr;
}

.location {
    padding: 8px 6px;
    text-align: center;
    border-top: 1px solid #27272a;
}

.location:first-child {
    border-right: 1px solid #27272a;
}

.location-label {
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: #a1a1aa;
    margin-bottom: 2px;
}

/* COUNT INPUT */
.count-input {
    width: 60px;
    font-size: 22px;
    font-weight: 700;
    text-align: center;
    background: transparent;
    border: none;
    outline: none;
    color: white;
    margin: 2px 0 4px;
}

.count-input::-webkit-outer-spin-button,
.count-input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

/* BUTTONS */
.btn-row {
    display: flex;
    justify-content: center;
    gap: 10px;
}

.btn {
    width: 38px;
    height: 38px;
    font-size: 20px;
    border-radius: 9999px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
}

.btn-minus { background: #27272a; color: #ddd; }
.btn-plus-home { background: #10b981; color: white; }
.btn-plus-hall { background: #0ea5e9; color: white; }

/* TOTAL */
.total-bar {
    padding: 6px 12px;
    font-size: 13px;
    display: flex;
    justify-content: space-between;
    background: #111113;
}

/* EMPTY */
.empty {
    text-align: center;
    padding: 60px 20px;
    color: #71717a;
}

/* TOAST */
.toast {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    background: #27272a;
    color: white;
    padding: 10px 18px;
    border-radius: 9999px;
    font-size: 14px;
    opacity: 0;
    transition: 0.3s;
}
</style>
</head>

<body>

<div class="container">

<div class="header">
    <h1>Item Tracker</h1>
    <button onclick="clearAll()" style="color:#ef4444;font-size:20px;">üóëÔ∏è</button>
</div>

<div class="add-bar">
    <input id="item-input" type="text" placeholder="New item..."
           onkeypress="if(event.key==='Enter') addItem()">
    <button onclick="addItem()" class="add-btn">ADD</button>
</div>

<div id="items-list"></div>

<div id="empty-state" class="empty" style="display:none;">
    <div style="font-size:60px;">üì¶</div>
    <h3>No items yet</h3>
</div>

</div>

<div id="toast" class="toast"></div>

<script>

let items = [];
const STORAGE_KEY = 'iphoneItemTracker2026_v4';

function loadItems() {
    const saved = localStorage.getItem(STORAGE_KEY);
    if (saved) items = JSON.parse(saved);
}

function saveItems() {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(items));
}

function showToast(msg) {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.style.opacity = 1;
    setTimeout(()=> t.style.opacity = 0, 1500);
}

function renderItems() {
    const container = document.getElementById('items-list');
    const empty = document.getElementById('empty-state');
    container.innerHTML = '';

    if (items.length === 0) {
        empty.style.display = 'block';
        return;
    }
    empty.style.display = 'none';

    items.forEach((item) => {

        const total = item.home + item.hall;
        const card = document.createElement('div');
        card.className = 'card';

        card.innerHTML = `
            <div class="item-header">
                <span class="item-name" onclick="renameItem('${item.id}')">${item.name}</span>
                <button onclick="moveUp('${item.id}')">‚ñ≤</button>
                <button onclick="moveDown('${item.id}')">‚ñº</button>
                <button onclick="deleteItem('${item.id}')" style="color:#ef4444;">üóëÔ∏è</button>
            </div>

            <div class="section">
                <div class="location">
                    <div class="location-label">HOME</div>
                    <input type="number" min="0" inputmode="numeric"
                        value="${item.home}"
                        onchange="setCount('${item.id}','home',this.value)"
                        class="count-input">
                    <div class="btn-row">
                        <button onclick="changeCount('${item.id}','home',-1)" class="btn btn-minus">‚àí</button>
                        <button onclick="changeCount('${item.id}','home',1)" class="btn btn-plus-home">+</button>
                    </div>
                </div>

                <div class="location">
                    <div class="location-label">HALL</div>
                    <input type="number" min="0" inputmode="numeric"
                        value="${item.hall}"
                        onchange="setCount('${item.id}','hall',this.value)"
                        class="count-input">
                    <div class="btn-row">
                        <button onclick="changeCount('${item.id}','hall',-1)" class="btn btn-minus">‚àí</button>
                        <button onclick="changeCount('${item.id}','hall',1)" class="btn btn-plus-hall">+</button>
                    </div>
                </div>
            </div>

            <div class="total-bar">
                <span>Total</span>
                <span>${total}</span>
            </div>
        `;

        container.appendChild(card);
    });
}

function moveUp(id){
    const i = items.findIndex(x=>x.id===id);
    if(i<=0) return;
    [items[i-1],items[i]]=[items[i],items[i-1]];
    saveItems();
    renderItems();
}

function moveDown(id){
    const i = items.findIndex(x=>x.id===id);
    if(i===-1 || i===items.length-1) return;
    [items[i+1],items[i]]=[items[i],items[i+1]];
    saveItems();
    renderItems();
}

function changeCount(id,loc,delta){
    const item = items.find(i=>i.id===id);
    if(!item) return;
    if(loc==='home') item.home=Math.max(0,item.home+delta);
    else item.hall=Math.max(0,item.hall+delta);
    saveItems();
    renderItems();
}

function setCount(id,loc,value){
    const item = items.find(i=>i.id===id);
    if(!item) return;
    const num=parseInt(value);
    if(isNaN(num)||num<0) return;
    if(loc==='home') item.home=num;
    else item.hall=num;
    saveItems();
    renderItems();
}

function renameItem(id){
    const item = items.find(i=>i.id===id);
    if(!item) return;
    const newName = prompt('Edit item name:', item.name);
    if(!newName || newName.trim()==='') return;
    item.name = newName.trim();
    saveItems();
    renderItems();
}

function addItem(){
    const input=document.getElementById('item-input');
    const name=input.value.trim();
    if(!name) return;
    if(items.some(i=>i.name.toLowerCase()===name.toLowerCase())){
        showToast('Item exists');
        return;
    }
    items.unshift({
        id:Date.now().toString(36),
        name,
        home:0,
        hall:0
    });
    input.value='';
    saveItems();
    renderItems();
}

function deleteItem(id){
    if(!confirm('Delete item?')) return;
    items=items.filter(i=>i.id!==id);
    saveItems();
    renderItems();
}

function clearAll(){
    if(!confirm('Clear all items?')) return;
    items=[];
    saveItems();
    renderItems();
}

window.onload=()=>{
    loadItems();
    renderItems();
};

</script>

</body>
</html>
